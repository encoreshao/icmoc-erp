#mCSB_1.mCustomScrollBox.mCS-light.mCSB_vertical.mCSB_inside
  #mCSB_1_container.mCSB_container{style: 'position:relative; top:0; left:0;'}
    %ul.x-navigation
      %li.xn-logo
        = link_to t('title'), root_path
        = link_to '', 'javascript:void(0);', class: 'x-navigation-control'

      %li.xn-title= t('menu.navigation')

      - if allow_view_dashboard?
        %li{class: "#{'active' if ['home'].include?(controller_name)}"}
          = link_to root_path do
            %i.fa.fa-tachometer
            %span.xn-text #{t('menu.dashboard')}

      - if allow_mange_users_roles?
        %li.xn-openable{class: "#{'active' if ['users', 'roles'].include?(controller_name)}"}
          = link_to 'javascript:void(0);' do
            %span.fa.fa-users
            %span.xn-text= "#{t('menu.users')}/#{t('menu.roles')}"
          %ul

            - if allow_permissions(:manage_users)
              %li{class: "#{'active' if ['users'].include?(controller_name)}"}
                = link_to users_path do
                  %span.fa.fa-user
                  #{t('menu.users')}
            - if allow_permissions(:manage_roles)
              %li{class: "#{'active' if ['roles'].include?(controller_name)}"}
                = link_to roles_path do
                  %span.fa.fa-paw
                  #{t('menu.roles')}

      - if allow_manage_companies_projects_sales?
        %li.xn-openable{class: "#{'active' if ['companies', 'projects', 'sales'].include?(controller_name)}"}
          = link_to 'javascript:void(0);' do
            %span.fa.fa-globe
            %span.xn-text= t('menu.business')
          %ul
            - if allow_permissions(:manage_companies)
              %li{class: "#{'active' if controller_name == 'companies'}"}
                = link_to companies_path do
                  %span.fa.fa-briefcase
                  #{t('menu.companies')}
            - if allow_permissions(:manage_sales)
              %li{class: "#{'active' if controller_name == 'sales'}"}
                %a{:href => sales_path}
                  %span.fa.fa-plus-circle
                  #{t('menu.sales')}
            - if allow_permissions(:manage_projects)
              %li{class: "#{'active' if controller_name == 'projects'}"}
                %a{:href => projects_path}
                  %span.fa.fa-star
                  #{t('menu.projects')}

      - if allow_manage_brands_products?
        %li.xn-openable{class: "#{'active' if ['brands', 'products'].include?(controller_name)}"}
          = link_to 'javascript:void(0);' do
            %span.fa.fa-folder-open
            %span.xn-text= "#{t('menu.brands')}/#{t('menu.products')}"
          %ul
            - if allow_permissions(:manage_brands)
              %li{class: "#{'active' if controller_name == 'brands'}"}
                = link_to brands_path do
                  %span.fa.fa-fire
                  #{t('menu.brands')}
            - if allow_permissions(:manage_products)
              %li{class: "#{'active' if controller_name == 'products'}"}
                = link_to products_path do
                  %span.fa.fa-list
                  #{t('menu.products')}

      - if allow_manage_inventory_management?
        %li.xn-openable{class: "#{'active' if ['purchases', 'suppliers', 'repertories', 'deliveries', 'storages'].include?(controller_name)}"}
          = link_to 'javascript:void(0);' do
            %span.fa.fa-database
            %span.xn-text= t('menu.inventory_management')
          %ul
            - if allow_permissions(:manage_suppliers)
              %li{class: "#{'active' if controller_name == 'suppliers'}"}
                = link_to suppliers_path do
                  %span.fa.fa-user-md
                  #{t('menu.suppliers')}
            - if allow_permissions(:manage_purchases)
              %li{class: "#{'active' if controller_name == 'purchases'}"}
                = link_to purchases_path do
                  %span.fa.fa-eye
                  #{t('menu.purchases')}
            - if allow_permissions(:manage_storages)
              %li{class: "#{'active' if controller_name == 'storages'}"}
                = link_to storages_path do
                  %span.fa.fa-cube
                  #{t('menu.storages')}
            - if allow_permissions(:manage_repertories)
              %li{class: "#{'active' if controller_name == 'repertories'}"}
                = link_to repertories_path do
                  %span.fa.fa-cubes
                  #{t('menu.repertories')}
            - if allow_permissions(:manage_deliveries)
              %li{class: "#{'active' if controller_name == 'deliveries'}"}
                = link_to deliveries_path do
                  %span.fa.fa-truck
                  #{t('menu.deliveries')}

      - if allow_manage_finances_and_reports?
        %li.xn-openable{class: "#{'active' if ['finances', 'reports'].include?(controller_name)}"}
          = link_to 'javascript:void(0);' do
            %span.fa.fa-bar-chart-o
            %span.xn-text= "#{t('menu.finances')}/#{t('menu.reports')}"
          %ul
            - if allow_permissions(:manage_finances)
              %li{class: "#{'active' if controller_name == 'finances'}"}
                = link_to finances_path do
                  %span.fa.fa-usd
                  #{t('menu.finances')}
            - if allow_permissions(:manage_reports)
              %li{class: "#{'active' if controller_name == 'reports'}"}
                = link_to reports_path do
                  %span.fa.fa-sliders
                  #{t('menu.reports')}

      - if allow_manage_reimbursements?
        %li.xn-openable{class: "#{'active' if ['reimbursements'].include?(controller_name)}"}
          = link_to 'javascript:void(0);' do
            %span.fa.fa-money
            %span.xn-text= t('menu.reimbursements')
          %ul
            - if allow_permissions(:manage_reimbursements)
              %li{class: "#{'active' if ['reimbursements'].include?(controller_name) && ['all'].include?(action_name)}"}
                = link_to all_reimbursements_path do
                  %span.fa.fa-money
                  #{t('menu.all_reimbursements')}
            - if allow_permissions(:search_reimbursements)
              %li{class: "#{'active' if ['reimbursements'].include?(controller_name) && ['index', 'new', 'edit', 'show'].include?(action_name)}"}
                = link_to reimbursements_path do
                  %span.fa.fa-dollar
                  #{t('menu.reimbursements')}

      - if allow_manage_regions?
        %li.xn-openable{class: "#{'active' if ['provinces', 'cities', 'districts'].include?(controller_name)}"}
          = link_to 'javascript:void(0);' do
            %span.fa.fa-cogs.fa-sitemap
            %span.xn-text= t('menu.regions')
          %ul
            - if allow_permissions(:manage_provinces)
              %li{class: "#{'active' if ['provinces'].include?(controller_name)}"}
                = link_to provinces_path do
                  %span.fa.fa-cog.fa-map-marker
                  #{t('menu.provinces')}
            - if allow_permissions(:manage_cities)
              %li{class: "#{'active' if ['cities'].include?(controller_name)}"}
                = link_to cities_path do
                  %span.fa.fa-tags.fa-location-arrow
                  #{t('menu.cities')}
            - if allow_permissions(:manage_districts)
              %li{class: "#{'active' if ['districts'].include?(controller_name)}"}
                = link_to districts_path do
                  %span.fa.fa-tags.fa-sitemap
                  #{t('menu.districts')}

      - if allow_manage_settings_and_units_and_themes?
        - controller_names = ['settings', 'product_units', 'themes']
        %li.xn-openable{class: "#{'active' if controller_names.include?(controller_name)}"}
          = link_to 'javascript:void(0);' do
            %span.fa.fa-cogs
            %span.xn-text= t('menu.settings')
          %ul
            - controller_names.each_with_index do |contr_name, index|
              - if allow_permissions("manage_#{contr_name}".to_sym)
                %li{class: "#{'active' if [contr_name].include?(controller_name)}"}
                  = link_to send("#{contr_name}_path") do
                    %span.fa{class: "#{['fa-cog', 'fa-tags', 'fa-th'][index]}"}
                    #{t("menu.#{contr_name}")}
